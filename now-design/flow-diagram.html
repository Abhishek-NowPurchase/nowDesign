<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Now Design System - File Processing Flow</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: white;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        h2 {
            color: #34495e;
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin-top: 30px;
        }
        .flow-box {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .flow-step {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        .flow-step h3 {
            color: #1976d2;
            margin-top: 0;
        }
        .code-block {
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .file-path {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 8px 12px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: #856404;
        }
        .arrow {
            text-align: center;
            font-size: 24px;
            color: #3498db;
            margin: 10px 0;
        }
        .insights {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .insights h3 {
            color: #155724;
            margin-top: 0;
        }
        .insights ul {
            margin: 10px 0;
        }
        .insights li {
            margin: 8px 0;
        }
        .workflow {
            background: #e2e3e5;
            border: 1px solid #d6d8db;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .workflow h3 {
            color: #495057;
            margin-top: 0;
        }
        .workflow ol {
            margin: 10px 0;
        }
        .workflow li {
            margin: 8px 0;
        }
        @media print {
            body {
                font-size: 12px;
            }
            .flow-box {
                break-inside: avoid;
            }
            .flow-step {
                break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Now Design System - File Processing Flow</h1>

        <div class="flow-box">
            <h2>Complete System Flow Overview</h2>
            <div style="text-align: center; font-size: 18px; margin: 20px 0;">
                <strong>TOKEN SOURCE (JSON) → STYLE DICTIONARY → CUSTOM FORMATTER → FINAL OUTPUTS</strong>
            </div>
        </div>

        <div class="flow-step">
            <h3>1. TOKEN SOURCE (JSON FILES)</h3>
            <div class="file-path">packages/tokens/</div>
            <ul>
                <li><strong>color/brand.json</strong> - Brand colors and values</li>
                <li><strong>scale/scale.json</strong> - Scale tokens (spacing, sizing)</li>
                <li><strong>scale/responsive-spacing.json</strong> - Responsive spacing tokens</li>
                <li><strong>typography/font-families.json</strong> - Font family definitions</li>
                <li><strong>typography/font-weights.json</strong> - Font weight values</li>
            </ul>
            <div class="code-block">
{ "brand": { "blue": { "600": { "value": "#1579BE", "type": "color" } } } }
            </div>
        </div>

        <div class="arrow">▼</div>

        <div class="flow-step">
            <h3>2. STYLE DICTIONARY CONFIGURATION</h3>
            <div class="file-path">style-dictionary.config.js</div>
            <p>This file tells Style Dictionary:</p>
            <ul>
                <li>Where to find token files: <code>packages/tokens/**/*.json</code></li>
                <li>How to process them: <code>transforms: ['attribute/cti', 'name/cti/kebab']</code></li>
                <li>Where to output: <code>buildPath: 'packages/tokens/dist/'</code></li>
                <li>What formats to generate: CSS, SCSS, JS</li>
            </ul>
        </div>

        <div class="arrow">▼</div>

        <div class="flow-step">
            <h3>3. BUILD SCRIPT EXECUTION</h3>
            <div class="file-path">build-tokens.js</div>
            <p>The execution script that:</p>
            <ul>
                <li>Imports Style Dictionary</li>
                <li>Registers custom formatter</li>
                <li>Runs the build process</li>
                <li>Generates all outputs</li>
            </ul>
        </div>

        <div class="arrow">▼</div>

        <div class="flow-step">
            <h3>4. STYLE DICTIONARY PROCESSING</h3>
            <p>Internal processing steps:</p>
            <ol>
                <li><strong>SCAN:</strong> Reads all JSON files from packages/tokens/**/*.json</li>
                <li><strong>PARSE:</strong> Converts JSON to Style Dictionary objects</li>
                <li><strong>RESOLVE:</strong> Processes references like {scale.300.value} → 12</li>
                <li><strong>TRANSFORM:</strong> Applies name transforms (brandBlue600 → brand-blue-600)</li>
                <li><strong>GROUP:</strong> Organizes tokens by platform (css, scss, js)</li>
            </ol>
        </div>

        <div class="arrow">▼</div>

        <div class="flow-step">
            <h3>5. CUSTOM FORMATTER PROCESSING</h3>
            <div class="file-path">style-dictionary/formats/responsive-css.js</div>
            <p>Custom formatter that:</p>
            <ul>
                <li>Processes each token</li>
                <li>Handles responsive tokens (desktop/tablet/mobile)</li>
                <li>Generates CSS with media queries</li>
                <li>Creates semantic CSS variables</li>
            </ul>
        </div>

        <div class="arrow">▼</div>

        <div class="flow-step">
            <h3>6. FINAL OUTPUTS</h3>
            <div class="file-path">packages/tokens/dist/</div>
            <ul>
                <li><strong>css/variables.css</strong> - Generated CSS variables with media queries</li>
                <li><strong>scss/_variables.scss</strong> - Generated SCSS variables</li>
                <li><strong>js/tokens.js</strong> - Generated JavaScript objects</li>
            </ul>
            <div class="code-block">
:root {
  --brand-blue-600: #1579BE;
  --gap-spacing-300-desktop: 12;
  --gap-spacing-300-tablet: 6;
  --gap-spacing-300-mobile: 4;
}

@media (max-width: 1024px) {
  :root {
    --gap-spacing-300: 6;
  }
}
            </div>
        </div>

        <div class="arrow">▼</div>

        <div class="flow-step">
            <h3>7. COMPONENT USAGE</h3>
            <div class="file-path">packages/atoms/src/Button/Button.css</div>
            <p>Components use the generated CSS variables:</p>
            <div class="code-block">
.simple-token-button {
  padding: var(--gap-spacing-300-desktop, 12px) var(--gap-spacing-600-desktop, 24px);
  background: var(--brand-blue-600, #1579BE);
  color: var(--brand-neutral-100, #fff);
  font-family: var(--font-family-body, 'Oxanium');
}
            </div>
        </div>

        <div class="arrow">▼</div>

        <div class="flow-step">
            <h3>8. CONSUMER APPLICATION</h3>
            <p>Consumer apps import and use components:</p>
            <div class="code-block">
import { Button } from '@now-design/atoms';
import '@now-design/tokens/dist/css/variables.css';

function MyApp() {
  return (
    &lt;Button&gt;Click me&lt;/Button&gt;
  );
}
            </div>
        </div>

        <div class="insights">
            <h3>Key Insights</h3>
            <ul>
                <li><strong>SINGLE SOURCE OF TRUTH:</strong> All design values start in JSON files</li>
                <li><strong>RESPONSIVE BY DESIGN:</strong> Responsive tokens have desktop/tablet/mobile values</li>
                <li><strong>AUTOMATED WORKFLOW:</strong> Run <code>npm run build-tokens</code> to regenerate all outputs</li>
                <li><strong>PLATFORM AGNOSTIC:</strong> Same tokens can generate CSS, SCSS, JS, Android, iOS, etc.</li>
            </ul>
        </div>

        <div class="workflow">
            <h3>Developer Workflow</h3>
            <ol>
                <li>Edit JSON tokens in packages/tokens/</li>
                <li>Run: <code>npm run build-tokens</code></li>
                <li>Generated files appear in packages/tokens/dist/</li>
                <li>Components automatically use new token values</li>
                <li>Test in Storybook: <code>npm run storybook</code></li>
            </ol>
        </div>

        <div class="flow-box">
            <h2>File Dependencies Flow</h2>
            <div style="text-align: center; font-size: 16px; margin: 20px 0;">
                <strong>JSON Tokens → Style Dictionary Config → Build Script → Custom Formatter → Generated Outputs → Components → Consumer Apps</strong>
            </div>
            <p style="text-align: center; font-style: italic;">Each step depends on the previous one, creating a reliable and predictable build process.</p>
        </div>
    </div>
</body>
</html> 